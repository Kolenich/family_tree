{% extends 'base.html' %}
{% load static sex_filters %}

{% block css %}
  <link rel='stylesheet' href='{% static 'css/person_detail.css' %}'>
{% endblock %}

{% block body %}
  {% static 'img/default-user.png' as default_avatar %}
  <div class='card mb-3'>
    <div class='card-body'>
      <img
          src='{% if person.avatar %}{{ person.avatar.url }}{% else %}{{ default_avatar }}{% endif %}'
          class='img-fluid img-thumbnail detail-img'
          alt='{{ person.full_name }}'
      >
      <h5 class='card-title'>{{ person.full_name }}</h5>
      <p class='card-text'>
        <b>Пол:</b> {{ person.get_sex_display|lower }}
        <br />
        <b>Возраст:</b> {{ person.age }}
      </p>
      <p class='card-text'>
        <b>Мать:</b>
        {% if person.mother %}
          <a class='link-info' href='{% url 'members:detail' person.mother.pk %}'>
            {{ person.mother.full_name }}
          </a>
        {% else %}
          <span>неизвестна</span>
        {% endif %}
        <br />
        <b>Отец:</b>
        {% if person.father %}
          <a class='link-info' href='{% url 'members:detail' person.father.pk %}'>
            {{ person.father.full_name }}
          </a>
        {% else %}
          <span>неизвестен</span>
        {% endif %}
      </p>
      {% include 'generic/spouse.html' with spouse=person.spouse %}
      {% for title, queryset in related_kin_lists.items %}
        {% if queryset %}
          <div class='card-text'>
            <b>{{ title }}:</b>
            <ul>
              {% for unit in queryset %}
                <li>
                  <a class='link-info' href='{% url 'members:detail' unit.pk %}'>{{ unit.full_name }}</a>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      {% endfor %}
      <p class='card-text'>
        <small class='text-muted'>
          {{ person.date_of_birth }} - {% firstof person.date_of_death 'н.в.' %}
        </small>
      </p>
      <a role='button' class='btn btn-primary m-2 float-end' href='{% url 'members:list' %}'>Назад</a>
    </div>
  </div>
{% endblock %}
